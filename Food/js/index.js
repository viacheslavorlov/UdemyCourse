/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";function e(e,t){const n=document.querySelector(e);n.classList.add("show"),n.classList.remove("hidden"),document.body.style.overflow="hidden",console.log(t),t&&clearInterval(t)}function t(e){const t=document.querySelector(e);t.classList.add("hidden"),t.classList.remove("show"),document.body.style.overflow=""}const n=function(n,o){const c=document.querySelectorAll(n);function s(n){const c=document.querySelector(".modal__dialog");c.classList.add("hide"),e(".modal",o);const s=document.createElement("div");s.classList.add("modal__dialog"),s.innerHTML=`\n        <div class="modal__content">\n            <div class="modal__close" data-close>×</div>\n            <div class="modal__title">${n}</div>\n        </div>\n    `,document.querySelector(".modal").append(s),setTimeout((()=>{s.remove(),c.classList.add("show"),c.classList.remove("hide"),t(".modal")}),4e3)}c.forEach((e=>{var t;(t=e).addEventListener("submit",(e=>{e.preventDefault();const n=document.createElement("img");n.src="img/spinner.svg",n.style.cssText="\n            display: block;\n            margin: 0 auto;\n        ",t.insertAdjacentElement("afterend",n);const o=new FormData(t);(async(e,t)=>{const n=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-type":"application/json"},body:t});return await n.json()})(0,JSON.stringify(Object.fromEntries(o.entries()))).then((e=>{console.log(e),s("Передача данных прошла успешно! Мы с вами свяжемся!"),setTimeout((()=>{n.remove()}),5e3)})).catch((()=>{s("Что-то пошло не так, попробуйте ещё раз:)")})).finally((()=>{t.reset()}))}))}))};document.addEventListener("DOMContentLoaded",(()=>{const o=setTimeout((()=>e(".modal",o)),8e3);(function(e,t,n,o){const c=document.querySelectorAll(e),s=document.querySelectorAll(t),a=document.querySelector(n);function r(){s.forEach((e=>{e.classList.add("hide","fade"),e.classList.remove("show")})),c.forEach((e=>{e.classList.remove(o)}))}function l(e=0){s[e].classList.add("show"),s[e].classList.remove("hide"),c[e].classList.add(o)}r(),l(),a.addEventListener("click",(t=>{t.target&&t.target.classList.contains(e.slice(1))&&c.forEach(((e,n)=>{t.target===e&&(r(),l(n))}))}))})(".tabheader__item",".tabcontent",".tabheader__items","tabheader__item_active"),function(e,t){function n(e){return e<10?`0${e}`:e}!function(o){const c=document.querySelector(e),s=c.querySelector("#days"),a=c.querySelector("#hours"),r=c.querySelector("#minutes"),l=c.querySelector("#seconds"),i=setInterval(d,1e3);function d(){const e=function(){let e,n,o,c;const s=Date.parse(t)-new Date;return s<=0?(e=0,n=0,o=0,c=0):(e=Math.floor(s/864e5),n=Math.floor(s/36e5%24),o=Math.floor(s/6e4%60),c=Math.floor(s/1e3%60)),{total:s,days:e,hours:n,minutes:o,seconds:c}}();e.total>0?(s.innerText=n(e.days),a.innerText=n(e.hours),r.innerText=n(e.minutes),l.innerText=n(e.seconds)):(clearInterval(i),s.textContent="00",a.textContent="00",r.textContent="00",l.textContent="00",s.parentElement.style.backgroundColor="red",a.parentElement.style.backgroundColor="red",r.parentElement.style.backgroundColor="red",l.parentElement.style.backgroundColor="red")}d()}()}(".timer","2022-05-07"),function(){class e{constructor(e,t,n,o,c,s,a,...r){this.name=e,this.img=t,this.alt=n,this.info=o,this.price=c,this.classes=r,this.element=s,this.parent=document.querySelector(a),this.transfer=.7,this.changeToUAH()}madeCart(){const e=document.createElement(this.element);0===this.classes.length&&this.classes.push("menu__item"),this.classes.forEach((t=>e.classList.add(t))),e.innerHTML=`\n            <img src=${this.img} alt=${this.alt}>\n            <h3 class="menu__item-subtitle">${this.name}</h3>\n            <div class="menu__item-descr">${this.info}</div>\n            <div class="menu__item-divider"></div>\n            <div class = "menu__item-price">\n                <div class="menu__item-cost"> Цена: </div>\n                <div class="menu__item-total"><span>${this.price}</span> грн/день </div>\n            </div>\n        `,this.parent.append(e)}changeToUAH(){this.price=(this.price*this.transfer).toFixed(2)}}(async e=>{const t=await fetch(e);if(!t.ok)throw new Error(`Could not fetch ${e}, status: ${t.status}`);return console.log(t),await t.json()})("http://localhost:3000/menu").then((t=>{t.forEach((({name:t,img:n,alt:o,info:c,price:s})=>{new e(t,n,o,c,s,"div",".menu .container").madeCart()}))}))}(),n("form",o),function(n,o,c){const s=document.querySelectorAll(n),a=document.querySelector(o);s.forEach((t=>{t.addEventListener("click",(()=>e(o,c)))})),a.addEventListener("click",(e=>{e.target!==a&&""!==e.target.getAttribute("data-close")||t(o)})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&a.classList.contains("show")&&t(o)})),window.addEventListener("scroll",(function t(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight-1&&(e(o,c),window.removeEventListener("scroll",t))}))}("[data-modal]",".modal",o),function({container:e,slides:t,nextArr:n,prevArr:o,totalImage:c,currImg:s,wrapper:a,field:r}){const l=document.querySelectorAll(t),i=document.querySelector(e),d=document.querySelector(c),u=document.querySelector(s),m=document.querySelector(o),h=document.querySelector(n),y=document.querySelector(a),v=document.querySelector(r),g=window.getComputedStyle(y).width;let f=1,_=0;function p(e,t){e.textContent=t<10?`0${t}`:`${t}`}v.style.width=100*l.length+"%",v.style.display="flex",v.style.transition=".45s all",y.style.overflow="hidden",l.forEach((e=>{e.style.width=g})),p(u,f),p(d,l.length);const E=document.createElement("div");E.style.height="25px",E.style.margin="0 auto",E.style.top="20px",E.cssText="\n    position: 'absolute';\n    display: flex;\n    margin-left = '15%';\n    margin-right = '15%';\n\t",l.forEach((()=>{const e=document.createElement("button");e.classList.add("dot-button"),e.style.width="25px",e.style.height="10px",e.style.border="none",e.style.borderRadius="18%",e.style.backgroundColor="lightgrey",e.style.margin="10px",e.style.transform="translateY(-40px)",e.style.opacity="0.8",E.append(e)})),i.append(E);const L=document.querySelectorAll(".dot-button");function S(){v.style.transform=`translateX(-${_}px`,f=_/parseInt(g)+1,L.forEach((e=>{e.style.backgroundColor="grey"})),L[f-1].style.backgroundColor="white",p(u,f)}L.forEach(((e,t,n)=>{e.style.backgroundColor="grey",e.addEventListener("click",(()=>{_=parseInt(g)*t,v.style.transform=`translateX(-${_}px`,n.forEach((e=>{e.style.backgroundColor="grey"})),e.style.backgroundColor="white",p(u,t+1)}))})),L[f-1].style.backgroundColor="white",h.addEventListener("click",(()=>{_===parseInt(g)*(l.length-1)?_=0:_+=parseInt(g),S()})),m.addEventListener("click",(()=>{0===_?_=parseInt(g)*(l.length-1):_-=parseInt(g),S()}))}({container:".offer__slider",slides:".offer__slide",totalImage:"#total",nextArr:".offer__slider-next",prevArr:".offer__slider-prev",currImg:"#current",wrapper:".offer__slider-wrapper",field:".offer__slider-inner"}),function(){const e=document.querySelectorAll("#gender .calculating__choose-item"),t=document.querySelector("#female"),n=document.querySelector("#male"),o=document.querySelectorAll(".calculating__choose_medium input"),c=document.querySelector("#height"),s=document.querySelector("#weight"),a=document.querySelector("#age"),r=document.querySelectorAll(".calculating__choose_big div"),l=document.querySelector("#result-kal");let i=localStorage.getItem("currentActivity");function d(){n.classList.contains("calculating__choose-item_active")?s.value&&a.value&&c.value&&i&&(l.textContent=Math.round((88.36+13.4*+s.value+4.8*+c.value-5.7*+a.value)*i)+" ккал"):t.classList.contains("calculating__choose-item_active")?s.value&&a.value&&c.value&&i&&(l.textContent=Math.round((447.6+9.2*+s.value+3.1*+c.value-4.3*+a.value)*i)+" ккал"):l.textContent="Введите все данные!"}l.textContent="Введите все данные",function(e,t){if(document.querySelectorAll(".calculating__choose-item").forEach((e=>{e.classList.remove(t),e.getAttribute("id")===localStorage.getItem("gender")&&e.classList.add(t)})),localStorage.currentActivity){let e=Math.round((localStorage.currentActivity-1.2)/.175);r[e].classList.add(t)}}(0,"calculating__choose-item_active"),e.forEach((t=>t.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("calculating__choose-item_active"))),t.classList.add("calculating__choose-item_active"),localStorage.setItem("gender",t.id),d()})))),o.forEach((e=>e.addEventListener("input",(()=>{""===e.value||Number.isNaN(+e.value)?(e.classList.remove("calculating__choose-item_active"),e.value="",l.textContent="Введите все данные в числах!"):(e.classList.add("calculating__choose-item_active"),d())})))),r.forEach(((e,t)=>e.addEventListener("click",(()=>{r.forEach((e=>e.classList.remove("calculating__choose-item_active"))),e.classList.add("calculating__choose-item_active"),i=(1.2+.175*t).toFixed(3),localStorage.setItem("currentActivity",i),d()}))))}()}))})();
//# sourceMappingURL=index.js.map